<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel='stylesheet' href='/css/reset.css'>
    <link rel='stylesheet' href='/css/main-page.css'>
    <link rel='stylesheet' href='/css/maps.css'>
    <script src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js"></script>
</head>

<body>
    <div id="header">
        <p id="site-title">EVERY LAST MILE</p>
    </div>
    <div id="content">
        <div id="left-panel">
            <ul id="directory">
                
                <li>
                    <a id="title" href="/2019/05/06/honolulu.html">
                        Honolulu
                    </a>
                    <div id="subtitle">
                        24 hours of pineapple and beaches
                    </div>
                    <p>
                        <time datetime="2019-05-06">06 May 2019</time>
                    </p>
                    <div id="divider"></div>
                </li>
                
                <li>
                    <a id="title" href="/2019/04/24/arches-timelapse.html">
                        Arches Timelapse
                    </a>
                    <div id="subtitle">
                        217 miles to eastern Utah
                    </div>
                    <p>
                        <time datetime="2019-04-24">24 April 2019</time>
                    </p>
                    <div id="divider"></div>
                </li>
                
                <li>
                    <a id="title" href="/2019/03/24/Yellowstone.html">
                        Yellowstone
                    </a>
                    <div id="subtitle">
                        Our *actual* last hurrah before baby
                    </div>
                    <p>
                        <time datetime="2019-03-24">24 March 2019</time>
                    </p>
                    <div id="divider"></div>
                </li>
                
                <li>
                    <a id="title" href="/2019/03/03/mount-timpanogos.html">
                        Mount Timpanogos
                    </a>
                    <div id="subtitle">
                        A video 9 months in the making
                    </div>
                    <p>
                        <time datetime="2019-03-03">03 March 2019</time>
                    </p>
                    <div id="divider"></div>
                </li>
                
                <li>
                    <a id="title" href="/2019/02/10/fifth-water-hot-springs.html">
                        Fifth Water Hot Springs
                    </a>
                    <div id="subtitle">
                        Snow-covered mountain springs
                    </div>
                    <p>
                        <time datetime="2019-02-10">10 February 2019</time>
                    </p>
                    <div id="divider"></div>
                </li>
                
                <li>
                    <a id="title" href="/2019/01/27/stewart-falls.html">
                        Stewart Falls
                    </a>
                    <div id="subtitle">
                        My favorite short hike in Utah Valley
                    </div>
                    <p>
                        <time datetime="2019-01-27">27 January 2019</time>
                    </p>
                    <div id="divider"></div>
                </li>
                
                <li>
                    <a id="title" href="/2019/01/13/las-vegas.html">
                        Las Vegas
                    </a>
                    <div id="subtitle">
                        The last hurrah before baby comes!
                    </div>
                    <p>
                        <time datetime="2019-01-13">13 January 2019</time>
                    </p>
                    <div id="divider"></div>
                </li>
                
                <li>
                    <a id="title" href="/2018/12/30/utah-lake.html">
                        Utah Lake
                    </a>
                    <div id="subtitle">
                        The pilot episode
                    </div>
                    <p>
                        <time datetime="2018-12-30">30 December 2018</time>
                    </p>
                    <div id="divider"></div>
                </li>
                
            </ul>
        </div>
        <div id="vert-divider"></div>
        <div id="right-panel">
            <div id="map"></div>
        </div>
    </div>

    <script>
        mapkit.init({
            authorizationCallback: function (done) {
                var xhr = new XMLHttpRequest();
                xhr.open("GET", "/services/jwt");
                xhr.addEventListener("load", function () {
                    done(this.responseText);
                });
                xhr.send();
            }
        });

        // Landmarks data
        var sanFranciscoLandmarks = [
            // { coordinate: new mapkit.Coordinate(37.7951315, -122.402986), title: "Transamerica Pyramid", phone: "+1-415-983-5420", url: "http://www.transamericapyramidcenter.com/" },
            // { coordinate: new mapkit.Coordinate(37.7954201, -122.39352), title: "Ferry Building", phone: "+1 (415) 983-8030", url: "http://www.ferrybuildingmarketplace.com" },
            // { coordinate: new mapkit.Coordinate(37.8083396, -122.415727), title: "Fisherman's Wharf", phone: "+1 (415) 673-3530", url: "http://visitfishermanswharf.com" },
            // { coordinate: new mapkit.Coordinate(37.8023553, -122.405742), title: "Coit Tower", phone: "+1 (415) 249-0995", url: "http://sfrecpark.org/destination/telegraph-hill-pioneer-park/coit-tower/" },
            // { coordinate: new mapkit.Coordinate(37.7552305, -122.452624), title: "Sutro Tower", phone: "+1 (415) 681-8850", url: "http://www.sutrotower.com" },
            // { coordinate: new mapkit.Coordinate(37.779267, -122.419269), title: "City Hall", phone: "+1 (415) 701-2311", url: "http://sfgsa.org/index.aspx?page=1085" },
            // { coordinate: new mapkit.Coordinate(37.8184493, -122.478409), title: "Golden Gate Bridge", phone: "+1 (415) 921-5858", url: "http://www.goldengatebridge.org" },
            // { coordinate: new mapkit.Coordinate(37.7785538, -122.514035), title: "Cliff House", phone: "+1 (415) 386-3330", url: "http://www.cliffhouse.com/" },
            
                { coordinate: new mapkit.Coordinate(21.367149, -157.939136), title: "Honolulu", phone: "24 hours of pineapple and beaches", url: "/2019/05/06/honolulu.html" },
            
                { coordinate: new mapkit.Coordinate(39.482768, -110.511772), title: "Arches Timelapse", phone: "217 miles to eastern Utah", url: "/2019/04/24/arches-timelapse.html" },
            
                { coordinate: new mapkit.Coordinate(44.460335, -110.828138), title: "Yellowstone", phone: "Our *actual* last hurrah before baby", url: "/2019/03/24/Yellowstone.html" },
            
                { coordinate: new mapkit.Coordinate(40.39085, -111.645943), title: "Mount Timpanogos", phone: "A video 9 months in the making", url: "/2019/03/03/mount-timpanogos.html" },
            
                { coordinate: new mapkit.Coordinate(40.08305, -111.31879), title: "Fifth Water Hot Springs", phone: "Snow-covered mountain springs", url: "/2019/02/10/fifth-water-hot-springs.html" },
            
                { coordinate: new mapkit.Coordinate(40.386279, -111.604438), title: "Stewart Falls", phone: "My favorite short hike in Utah Valley", url: "/2019/01/27/stewart-falls.html" },
            
                { coordinate: new mapkit.Coordinate(36.119222, -115.172688), title: "Las Vegas", phone: "The last hurrah before baby comes!", url: "/2019/01/13/las-vegas.html" },
            
                { coordinate: new mapkit.Coordinate(40.362397, -111.886255), title: "Utah Lake", phone: "The pilot episode", url: "/2018/12/30/utah-lake.html" },
            
        ];

        // Landmark annotation callout delegate
        var CALLOUT_OFFSET = new DOMPoint(-148, -78);
        var landmarkAnnotationCallout = {
            calloutElementForAnnotation: function (annotation) {
                return calloutForLandmarkAnnotation(annotation);
            },

            calloutAnchorOffsetForAnnotation: function (annotation, element) {
                return CALLOUT_OFFSET;
            },

            calloutAppearanceAnimationForAnnotation: function (annotation) {
                return "scale-and-fadein .4s 0 1 normal cubic-bezier(0.4, 0, 0, 1.5)";
            }
        };

        // Landmarks annotations
        var annotations = sanFranciscoLandmarks.map(function (landmark) {
            var annotation = new mapkit.MarkerAnnotation(landmark.coordinate, {
                callout: landmarkAnnotationCallout,
                color: "#c969e0"
            });
            annotation.landmark = landmark;
            return annotation;
        });

        var map = new mapkit.Map("map");
        map.showItems(annotations);

        // Landmark annotation custom callout
        function calloutForLandmarkAnnotation(annotation) {
            var div = document.createElement("div");
            div.className = "landmark";

            var title = div.appendChild(document.createElement("h1"));
            title.textContent = annotation.landmark.title;

            var section = div.appendChild(document.createElement("section"));

            var phone = section.appendChild(document.createElement("p"));
            phone.className = "phone";
            phone.textContent = annotation.landmark.phone;

            var link = section.appendChild(document.createElement("p"));
            link.className = "homepage";
            var a = link.appendChild(document.createElement("a"));
            a.href = annotation.landmark.url;
            a.textContent = "Read now";

            return div;
        }
    </script>
</body>

</html>
